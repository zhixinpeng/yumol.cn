<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>电影故障抖动视觉效果实现：对大话手游愚人节专题的探究</title>
  <script type="module" crossorigin="" src="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/app.0f81359a.js"></script>
  <link rel="modulepreload" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/vendor.43d648f2.js">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/app.a645265b.css">
<link rel="manifest" href="/manifest.webmanifest">
<script src="/registerSW.js"></script>
<link rel="modulepreload" crossorigin="" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/canvas-movie-jitter-effect.83671684.js"><link rel="modulepreload" crossorigin="" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/Detail.vue_vue&amp;type=script&amp;setup=true&amp;lang.f4dbd703.js"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/Detail.vue_vue&amp;type=script&amp;setup=true&amp;lang.af6bf2c8.css"><link rel="modulepreload" crossorigin="" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/Sidebar.c8891f56.js"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/Sidebar.2512c403.css"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhixinpeng/storage/img/avatar_300x300.png"><meta name="theme-color" content="#111111"><meta property="og:title" content="电影故障抖动视觉效果实现：对大话手游愚人节专题的探究 - 服务端技术"><meta name="description" content="前几天愚人节的时候，大话手游官网上了一个专题，里面很多图片位置都使用了一个类似电影那种画面抖动的效果（目前只剩下一个slogan了，其他都下线了），很好奇是怎么实现的，于是扒了一下页面的源码，了解了一些实现思路，整理一下以后可能会用到。"><meta name="keywords" content="抖屏效果"><meta name="head:count" content="5"></head>
  <body>
    <div id="app" data-server-rendered="true"><!--[--><header class="flex justify-between items-center w-full md:h-24 h-14 px-4 border-b-4 dark:border-white dark:border-opacity-5 bg-white bg-opacity-5" data-v-74d4f9c0=""><div class="flex justify-start items-center" data-v-74d4f9c0=""><div class="flex flex-shrink-0 md:w-14 w-8 md:h-14 h-8 rounded-full overflow-hidden" data-v-74d4f9c0=""><img class="img" src="https://cdn.jsdelivr.net/gh/zhixinpeng/storage/img/avatar_60x60.png" alt="服务端技术" width="56" height="56" data-v-74d4f9c0=""></div><span class="md:ml-4 ml-2 md:text-2xl text-xl" data-v-74d4f9c0="">服务端技术</span></div><nav class="nav flex flex-1 justify-end items-center text-xl" data-v-74d4f9c0=""><a class="select-none mr-4" data-v-74d4f9c0=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" style="vertical-align:middle;transform:translateY(-5%);" data-v-74d4f9c0=""><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" style="vertical-align:middle;transform:translateY(-5%);display:none;" data-v-74d4f9c0=""><path d="M12 10.586l4.95-4.95l1.414 1.414l-4.95 4.95l4.95 4.95l-1.414 1.414l-4.95-4.95l-4.95 4.95l-1.414-1.414l4.95-4.95l-4.95-4.95L7.05 5.636z" fill="currentColor"></path></svg></a><a class="select-none text-xl" title="切换到暗黑模式" data-v-74d4f9c0=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" style="vertical-align:middle;transform:translateY(-5%);display:none;" data-v-74d4f9c0=""><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938A7.999 7.999 0 0 0 4 12z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" style="vertical-align:middle;transform:translateY(-5%);" data-v-74d4f9c0=""><path d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05L3.515 4.93zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414l-2.121-2.121zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414l2.121-2.121zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414l2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z" fill="currentColor"></path></svg></a><!----></nav></header><main class="flex justify-between container md:mx-auto box-border px-4 md:mt-16 mt-4"><!--[--><section class="article-detail flex justify-start flex-col flex-1 md:w-auto w-full overflow-hidden" data-v-61929a25=""><h1 class="flex items-center w-full md:text-3xl text-xl md:mb-4 mb-2" data-v-61929a25="">电影故障抖动视觉效果实现：对大话手游愚人节专题的探究</h1><p class="flex items-center w-full text-sm text-gray-400 md:mb-8 mb-4 md:pb-8 pb-4 border-b dark:border-white dark:border-opacity-5" data-v-61929a25=""><span class="mr-8" data-v-61929a25="">作者：彭智鑫</span><span title="2020/04/20" data-v-61929a25="">2020/04/20</span></p><p class="flex justify-center items-center w-full p-4 md:mb-8 mb-4 bg-gray-50 dark:bg-white dark:bg-opacity-5 rounded text-gray-600 dark:text-gray-300 text-sm" data-v-61929a25=""> 本文最后更新于 1063 天前，部分内容可能不适合当前所有情况，仅供参考。 </p><!--[--><!--[--><div class="article-content prose mx-auto" data-v-61929a25-s=""><p data-v-61929a25-s=""></p><div class="article-toc prose" data-v-61929a25-s=""><ul data-v-61929a25-s=""><li data-v-61929a25-s=""><a href="#%E6%95%88%E6%9E%9C" data-v-61929a25-s=""> 效果</a></li><li data-v-61929a25-s=""><a href="#%E8%B5%B7%E5%9B%A0" data-v-61929a25-s=""> 起因</a></li><li data-v-61929a25-s=""><a href="#%E6%80%9D%E8%B7%AF" data-v-61929a25-s=""> 思路</a></li><li data-v-61929a25-s=""><a href="#%E6%8E%A2%E8%B7%AF" data-v-61929a25-s=""> 探路</a></li><li data-v-61929a25-s=""><a href="#%E5%AE%9E%E7%8E%B0" data-v-61929a25-s=""> 实现</a><ul data-v-61929a25-s=""><li data-v-61929a25-s=""><a href="#%E6%96%B9%E6%A1%88%E4%B8%80%EF%BC%9A%E4%BD%BF%E7%94%A8gif%E5%8A%A8%E5%9B%BE" data-v-61929a25-s=""> 方案一：使用gif动图</a></li><li data-v-61929a25-s=""><a href="#%E6%96%B9%E6%A1%88%E4%BA%8C%EF%BC%9A%E5%88%87%E6%8D%A2%E5%9B%BE%E7%89%87%E5%9C%B0%E5%9D%80" data-v-61929a25-s=""> 方案二：切换图片地址</a></li><li data-v-61929a25-s=""><a href="#%E6%96%B9%E6%A1%88%E4%B8%89%EF%BC%9A%E4%BD%BF%E7%94%A8%E5%AE%9A%E6%97%B6%E5%99%A8%E5%88%87%E6%8D%A2%E8%83%8C%E6%99%AF%E5%9B%BE" data-v-61929a25-s=""> 方案三：使用定时器切换背景图</a></li><li data-v-61929a25-s=""><a href="#%E6%96%B9%E6%A1%88%E5%9B%9B%EF%BC%9A%E4%BD%BF%E7%94%A8css3%E9%80%90%E5%B8%A7%E5%8A%A8%E7%94%BB" data-v-61929a25-s=""> 方案四：使用css3逐帧动画</a></li><li data-v-61929a25-s=""><a href="#%E6%96%B9%E6%A1%88%E4%BA%94%EF%BC%9A%E4%BD%BF%E7%94%A8canvas%E9%80%90%E5%B8%A7%E7%BB%98%E5%88%B6" data-v-61929a25-s=""> 方案五：使用canvas逐帧绘制</a></li></ul></li><li data-v-61929a25-s=""><a href="#%E6%9C%80%E5%90%8E" data-v-61929a25-s=""> 最后</a></li></ul></div><p></p><p data-v-61929a25-s="">前几天愚人节的时候，大话手游官网上了一个专题（<a href="https://dhxy.163.com/2020/gsq/" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">专题地址</a>），里面很多图片位置都使用了一个类似电影那种画面抖动的效果（目前只剩下一个slogan了，其他都下线了），很好奇是怎么实现的，于是扒了一下页面的源码，了解了一些实现思路，整理一下以后可能会用到。</p><h2 id="效果" data-v-61929a25-s=""><a class="header-anchor" href="#效果" aria-hidden="true" data-v-61929a25-s="">#</a> 效果</h2><p data-v-61929a25-s=""><img src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2020/04/1.gif" alt="" data-v-61929a25-s=""></p><h2 id="起因" data-v-61929a25-s=""><a class="header-anchor" href="#起因" aria-hidden="true" data-v-61929a25-s="">#</a> 起因</h2><p data-v-61929a25-s="">其实这个需求如果是直接给你做，你能不能马上有思路去做出来呢？相信大部分人都会有，那我为啥还要去看他们怎么实现的呢？</p><p data-v-61929a25-s="">想做这件事的原因，主要是：</p><p data-v-61929a25-s="">1、想知道对方是怎么实现的，那个抖动的特效，是有素材还是直接前端处理出来的，是不是在自己的预料之中。</p><p data-v-61929a25-s="">2、自己虽然能马上想到一些实现方案，但还是想看看是否有更优秀的解决办法，可以偷师学习！</p><p data-v-61929a25-s="">3、看看这个效果的素材是怎么处理的，以后遇到类似的需求，我是不是可以把一些锅甩给设计师？</p><h2 id="思路" data-v-61929a25-s=""><a class="header-anchor" href="#思路" aria-hidden="true" data-v-61929a25-s="">#</a> 思路</h2><p data-v-61929a25-s="">在看它是怎么实现之前，先凭经验猜测了一下，有多少种可能实现的方式：gif动图、视频、flash、逐帧动画、图片切换、背景图切换、svg、canvas…（前端牛逼啊！！！！）</p><p data-v-61929a25-s="">当然每种方法的实现成本不一样，对应的体验和性能也不一样，思路有了，那么来验证一下官网是怎么做的。</p><h2 id="探路" data-v-61929a25-s=""><a class="header-anchor" href="#探路" aria-hidden="true" data-v-61929a25-s="">#</a> 探路</h2><p data-v-61929a25-s="">我开始以为是用的视频，因为按网易游戏以往的尿性来说，营销页面上的动态类主视觉基本都是用视频来实现的…那么要怎么看实现方法呢？当然是看DOM啊！</p><p data-v-61929a25-s=""><img src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2020/04/1-1.jpg" alt="" data-v-61929a25-s=""></p><p data-v-61929a25-s="">所以，用的是canvas，那就有趣了！还好不是视频，直接弄个视频引入的话也就没这篇文章什么事了…</p><p data-v-61929a25-s="">canvas的动画效果，都是一帧一帧的定时走出来的，这说明素材是来自设计师之手，不一定是前端直接处理的。</p><p data-v-61929a25-s="">接下来就找素材了，这种效果的素材，基本上都是图片，找图片的过程就比较简单了，作为主视觉上这么大的slogan，结合刚刚查看DOM的时候，你发现那个地方的className就叫slogan，那么对应的素材命名，肯定也跟slogan有关，单刀直入切到img，搜索slogan关键词，全都出来了。</p><p data-v-61929a25-s=""><img src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2020/04/2.jpg" alt="" data-v-61929a25-s=""></p><p data-v-61929a25-s="">可以看出他们是把整个动画过程的每一帧，都处理了一张图片素材，我们先把素材弄下来。</p><p data-v-61929a25-s=""><img src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2020/04/3.jpg" alt="" data-v-61929a25-s=""></p><p data-v-61929a25-s="">一共有30帧，30张一样尺寸的素材，现在素材有了，接下来就可以开始尝试效果复原。</p><h2 id="实现" data-v-61929a25-s=""><a class="header-anchor" href="#实现" aria-hidden="true" data-v-61929a25-s="">#</a> 实现</h2><p data-v-61929a25-s="">实现方案我上面说了，那就一个方案一个方案来看怎么实现，完整的在线demo在文末有地址。</p><p data-v-61929a25-s="">方案根据推荐度从低到高说起吧，实现难度基本上也是从低到高这样…</p><h3 id="方案一：使用gif动图" data-v-61929a25-s=""><a class="header-anchor" href="#方案一：使用gif动图" aria-hidden="true" data-v-61929a25-s="">#</a> 方案一：使用gif动图</h3><p data-v-61929a25-s="">先从最容易想到的方案说起吧，动图从制作成本来说是最省事的…只需要一个img标签就可以导进来了。</p><p data-v-61929a25-s="">【推荐】★★★☆☆</p><p data-v-61929a25-s="">【优点】简单，直接导个gif引入就完事，纯html。</p><p data-v-61929a25-s="">【弊端】一般来说动图都会比较大，像demo里面只有一个slogan动图都去到了866KB，太多的gif对页面的渲染速度有影响，用户体验不是最佳。</p><pre class="language-javascript" data-v-61929a25-s=""><code class="language-javascript" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">// html</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span>section <span class="token keyword" data-v-61929a25-s="">class</span><span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"section section-01"</span><span class="token operator" data-v-61929a25-s="">&gt;</span>
  <span class="token operator" data-v-61929a25-s="">&lt;</span>div <span class="token keyword" data-v-61929a25-s="">class</span><span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"img"</span><span class="token operator" data-v-61929a25-s="">&gt;</span>
    <span class="token operator" data-v-61929a25-s="">&lt;</span>img src<span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"img/slogan.gif"</span><span class="token operator" data-v-61929a25-s="">&gt;</span>
  <span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>div<span class="token operator" data-v-61929a25-s="">&gt;</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>section<span class="token operator" data-v-61929a25-s="">&gt;</span>
</code></pre><h3 id="方案二：切换图片地址" data-v-61929a25-s=""><a class="header-anchor" href="#方案二：切换图片地址" aria-hidden="true" data-v-61929a25-s="">#</a> 方案二：切换图片地址</h3><p data-v-61929a25-s="">结合我们的素材，已经是处理好一帧一帧这样的过渡状态，那通过定时切换的效果，把他们按指定的时间和顺序切下去，也可以达到想要的效果。</p><p data-v-61929a25-s="">【推荐】★★☆☆☆</p><p data-v-61929a25-s="">【优点】简单，批量导出每一帧的png素材出来，定时替换图片的地址就完事（而且每一帧的素材都不会很大）。</p><p data-v-61929a25-s="">【弊端】需要频繁的操作DOM，性能方面开销太大。</p><pre class="language-javascript" data-v-61929a25-s=""><code class="language-javascript" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">// html</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span>section <span class="token keyword" data-v-61929a25-s="">class</span><span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"section section-02"</span><span class="token operator" data-v-61929a25-s="">&gt;</span>
  <span class="token operator" data-v-61929a25-s="">&lt;</span>div <span class="token keyword" data-v-61929a25-s="">class</span><span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"img"</span><span class="token operator" data-v-61929a25-s="">&gt;</span>
    <span class="token operator" data-v-61929a25-s="">&lt;</span>img src<span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"img/0.png"</span><span class="token operator" data-v-61929a25-s="">&gt;</span>
  <span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>div<span class="token operator" data-v-61929a25-s="">&gt;</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>section<span class="token operator" data-v-61929a25-s="">&gt;</span>

<span class="token comment" data-v-61929a25-s="">// js</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span>script type<span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"text/javascript"</span><span class="token operator" data-v-61929a25-s="">&gt;</span>
  <span class="token keyword" data-v-61929a25-s="">const</span> slogan <span class="token operator" data-v-61929a25-s="">=</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
    index<span class="token operator" data-v-61929a25-s="">:</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    indexMax<span class="token operator" data-v-61929a25-s="">:</span> <span class="token number" data-v-61929a25-s="">29</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    time<span class="token operator" data-v-61929a25-s="">:</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    dom<span class="token operator" data-v-61929a25-s="">:</span> document<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">querySelector</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token string" data-v-61929a25-s="">'.section-02 .img img'</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    <span class="token function" data-v-61929a25-s="">auto</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token parameter" data-v-61929a25-s="">speed</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">{</span>
      <span class="token keyword" data-v-61929a25-s="">let</span> change <span class="token operator" data-v-61929a25-s="">=</span> <span class="token function" data-v-61929a25-s="">setInterval</span><span class="token punctuation" data-v-61929a25-s="">(</span> <span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span> <span class="token operator" data-v-61929a25-s="">=&gt;</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
        <span class="token comment" data-v-61929a25-s="">// 动态调整图片帧显示</span>
        <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index <span class="token operator" data-v-61929a25-s="">&lt;</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>indexMax <span class="token operator" data-v-61929a25-s="">?</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index<span class="token operator" data-v-61929a25-s="">++</span> <span class="token operator" data-v-61929a25-s="">:</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index <span class="token operator" data-v-61929a25-s="">=</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">;</span>
        <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>dom<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">setAttribute</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token string" data-v-61929a25-s="">'src'</span><span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token template-string" data-v-61929a25-s=""><span class="token template-punctuation string" data-v-61929a25-s="">`</span><span class="token string" data-v-61929a25-s="">img/</span><span class="token interpolation" data-v-61929a25-s=""><span class="token interpolation-punctuation punctuation" data-v-61929a25-s="">${</span><span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index<span class="token interpolation-punctuation punctuation" data-v-61929a25-s="">}</span></span><span class="token string" data-v-61929a25-s="">.png</span><span class="token template-punctuation string" data-v-61929a25-s="">`</span></span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>

        <span class="token comment" data-v-61929a25-s="">// 每运行10次动画周期后销毁定时器，进行垃圾回收后再重新创建</span>
        <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>time <span class="token operator" data-v-61929a25-s="">+=</span> speed<span class="token punctuation" data-v-61929a25-s="">;</span>
        <span class="token keyword" data-v-61929a25-s="">if</span> <span class="token punctuation" data-v-61929a25-s="">(</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>time <span class="token operator" data-v-61929a25-s="">&gt;</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>indexMax <span class="token operator" data-v-61929a25-s="">*</span> speed <span class="token operator" data-v-61929a25-s="">*</span> <span class="token number" data-v-61929a25-s="">10</span><span class="token punctuation" data-v-61929a25-s="">)</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
          <span class="token function" data-v-61929a25-s="">clearInterval</span><span class="token punctuation" data-v-61929a25-s="">(</span>change<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
          change <span class="token operator" data-v-61929a25-s="">=</span> <span class="token keyword" data-v-61929a25-s="">null</span><span class="token punctuation" data-v-61929a25-s="">;</span>
          <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>time <span class="token operator" data-v-61929a25-s="">=</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">;</span>
          <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">auto</span><span class="token punctuation" data-v-61929a25-s="">(</span>speed<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
        <span class="token punctuation" data-v-61929a25-s="">}</span>
      <span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">,</span> speed<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
    <span class="token punctuation" data-v-61929a25-s="">}</span>
  <span class="token punctuation" data-v-61929a25-s="">}</span>
  slogan<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">auto</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token number" data-v-61929a25-s="">100</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>script<span class="token operator" data-v-61929a25-s="">&gt;</span>
</code></pre><h3 id="方案三：使用定时器切换背景图" data-v-61929a25-s=""><a class="header-anchor" href="#方案三：使用定时器切换背景图" aria-hidden="true" data-v-61929a25-s="">#</a> 方案三：使用定时器切换背景图</h3><p data-v-61929a25-s="">【推荐】★★☆☆☆</p><p data-v-61929a25-s="">和方法二比较类似，只不过方法二是切换图片的src，这里是切换div的样式，来达到换背景图的效果，优缺点说起来差不多。</p><pre class="language-javascript" data-v-61929a25-s=""><code class="language-javascript" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">// html</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span>section <span class="token keyword" data-v-61929a25-s="">class</span><span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"section section-03"</span><span class="token operator" data-v-61929a25-s="">&gt;</span>
  <span class="token operator" data-v-61929a25-s="">&lt;</span>div <span class="token keyword" data-v-61929a25-s="">class</span><span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"img bg"</span><span class="token operator" data-v-61929a25-s="">&gt;</span><span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>div<span class="token operator" data-v-61929a25-s="">&gt;</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>section<span class="token operator" data-v-61929a25-s="">&gt;</span>

<span class="token comment" data-v-61929a25-s="">// js</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span>script type<span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"text/javascript"</span><span class="token operator" data-v-61929a25-s="">&gt;</span>
  <span class="token keyword" data-v-61929a25-s="">const</span> sloganBg <span class="token operator" data-v-61929a25-s="">=</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
    index<span class="token operator" data-v-61929a25-s="">:</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    indexMax<span class="token operator" data-v-61929a25-s="">:</span> <span class="token number" data-v-61929a25-s="">29</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    time<span class="token operator" data-v-61929a25-s="">:</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    dom<span class="token operator" data-v-61929a25-s="">:</span> document<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">querySelector</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token string" data-v-61929a25-s="">'.section-03 .bg'</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    <span class="token function" data-v-61929a25-s="">auto</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token parameter" data-v-61929a25-s="">speed</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">{</span>
      <span class="token keyword" data-v-61929a25-s="">let</span> change <span class="token operator" data-v-61929a25-s="">=</span> <span class="token function" data-v-61929a25-s="">setInterval</span><span class="token punctuation" data-v-61929a25-s="">(</span> <span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span> <span class="token operator" data-v-61929a25-s="">=&gt;</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
        <span class="token comment" data-v-61929a25-s="">// 先移除上一帧的样式</span>
        <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>dom<span class="token punctuation" data-v-61929a25-s="">.</span>classList<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">remove</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token template-string" data-v-61929a25-s=""><span class="token template-punctuation string" data-v-61929a25-s="">`</span><span class="token string" data-v-61929a25-s="">bg-</span><span class="token interpolation" data-v-61929a25-s=""><span class="token interpolation-punctuation punctuation" data-v-61929a25-s="">${</span><span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index<span class="token interpolation-punctuation punctuation" data-v-61929a25-s="">}</span></span><span class="token template-punctuation string" data-v-61929a25-s="">`</span></span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>

        <span class="token comment" data-v-61929a25-s="">// 动态调整图片帧显示</span>
        <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index <span class="token operator" data-v-61929a25-s="">&lt;</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>indexMax <span class="token operator" data-v-61929a25-s="">?</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index<span class="token operator" data-v-61929a25-s="">++</span> <span class="token operator" data-v-61929a25-s="">:</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index <span class="token operator" data-v-61929a25-s="">=</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">;</span>
        <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>dom<span class="token punctuation" data-v-61929a25-s="">.</span>classList<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">add</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token template-string" data-v-61929a25-s=""><span class="token template-punctuation string" data-v-61929a25-s="">`</span><span class="token string" data-v-61929a25-s="">bg-</span><span class="token interpolation" data-v-61929a25-s=""><span class="token interpolation-punctuation punctuation" data-v-61929a25-s="">${</span><span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index<span class="token interpolation-punctuation punctuation" data-v-61929a25-s="">}</span></span><span class="token template-punctuation string" data-v-61929a25-s="">`</span></span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>

        <span class="token comment" data-v-61929a25-s="">// 每运行10次动画周期后销毁定时器，进行垃圾回收后再重新创建</span>
        <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>time <span class="token operator" data-v-61929a25-s="">+=</span> speed<span class="token punctuation" data-v-61929a25-s="">;</span>
        <span class="token keyword" data-v-61929a25-s="">if</span> <span class="token punctuation" data-v-61929a25-s="">(</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>time <span class="token operator" data-v-61929a25-s="">&gt;</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>indexMax <span class="token operator" data-v-61929a25-s="">*</span> speed <span class="token operator" data-v-61929a25-s="">*</span> <span class="token number" data-v-61929a25-s="">10</span><span class="token punctuation" data-v-61929a25-s="">)</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
          <span class="token function" data-v-61929a25-s="">clearInterval</span><span class="token punctuation" data-v-61929a25-s="">(</span>change<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
          change <span class="token operator" data-v-61929a25-s="">=</span> <span class="token keyword" data-v-61929a25-s="">null</span><span class="token punctuation" data-v-61929a25-s="">;</span>
          <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>time <span class="token operator" data-v-61929a25-s="">=</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">;</span>
          <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">auto</span><span class="token punctuation" data-v-61929a25-s="">(</span>speed<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
        <span class="token punctuation" data-v-61929a25-s="">}</span>
      <span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">,</span> speed<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
    <span class="token punctuation" data-v-61929a25-s="">}</span>
  <span class="token punctuation" data-v-61929a25-s="">}</span>
  sloganBg<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">auto</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token number" data-v-61929a25-s="">100</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>script<span class="token operator" data-v-61929a25-s="">&gt;</span>
</code></pre><h3 id="方案四：使用css3逐帧动画" data-v-61929a25-s=""><a class="header-anchor" href="#方案四：使用css3逐帧动画" aria-hidden="true" data-v-61929a25-s="">#</a> 方案四：使用css3逐帧动画</h3><p data-v-61929a25-s="">这个办法我是比较推荐的，实现成本并不高，写起来也很简单，体验又好。</p><p data-v-61929a25-s="">【推荐】★★★★☆</p><p data-v-61929a25-s="">【优点】简单，性能好，生成雪碧图，然后写个动画就完事。</p><p data-v-61929a25-s="">【弊端】部分古董设备不兼容，然后还有个问题，就是像demo里的这个素材，做成雪碧图贼他妈大（2.24MB，经过tinypin压缩后还是有640KB），所以素材太大的情况下，最好不要用这个办法来搞。</p><pre class="language-javascript" data-v-61929a25-s=""><code class="language-javascript" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">// css</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span>style<span class="token operator" data-v-61929a25-s="">&gt;</span>
<span class="token punctuation" data-v-61929a25-s="">.</span>go <span class="token punctuation" data-v-61929a25-s="">{</span>
  background<span class="token operator" data-v-61929a25-s="">-</span>image<span class="token operator" data-v-61929a25-s="">:</span> <span class="token function" data-v-61929a25-s="">url</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token string" data-v-61929a25-s="">'../img/sprites.png'</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
  background<span class="token operator" data-v-61929a25-s="">-</span>repeat<span class="token operator" data-v-61929a25-s="">:</span> no<span class="token operator" data-v-61929a25-s="">-</span>repeat<span class="token punctuation" data-v-61929a25-s="">;</span>
  animation<span class="token operator" data-v-61929a25-s="">:</span> go <span class="token function" data-v-61929a25-s="">steps</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token number" data-v-61929a25-s="">29</span><span class="token punctuation" data-v-61929a25-s="">,</span> end<span class="token punctuation" data-v-61929a25-s="">)</span> <span class="token number" data-v-61929a25-s="">3</span>s infinite<span class="token punctuation" data-v-61929a25-s="">;</span>
<span class="token punctuation" data-v-61929a25-s="">}</span>
@keyframes go <span class="token punctuation" data-v-61929a25-s="">{</span>
  <span class="token number" data-v-61929a25-s="">100</span><span class="token operator" data-v-61929a25-s="">%</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
    background<span class="token operator" data-v-61929a25-s="">-</span>position<span class="token operator" data-v-61929a25-s="">:</span> <span class="token operator" data-v-61929a25-s="">-</span><span class="token number" data-v-61929a25-s="">0</span> <span class="token operator" data-v-61929a25-s="">-</span><span class="token number" data-v-61929a25-s="">8729</span>px<span class="token punctuation" data-v-61929a25-s="">;</span>
<span class="token punctuation" data-v-61929a25-s="">}</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>style<span class="token operator" data-v-61929a25-s="">&gt;</span>

<span class="token comment" data-v-61929a25-s="">// html</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span>section <span class="token keyword" data-v-61929a25-s="">class</span><span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"section section-04"</span><span class="token operator" data-v-61929a25-s="">&gt;</span>
  <span class="token operator" data-v-61929a25-s="">&lt;</span>div <span class="token keyword" data-v-61929a25-s="">class</span><span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"img bg go"</span><span class="token operator" data-v-61929a25-s="">&gt;</span><span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>div<span class="token operator" data-v-61929a25-s="">&gt;</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>section<span class="token operator" data-v-61929a25-s="">&gt;</span>
</code></pre><p data-v-61929a25-s="">实现思路：</p><p data-v-61929a25-s="">1、把所有的帧素材都合并为一张雪碧图，减少http请求，通过animation的背景图移动来实现视觉上的切换。</p><p data-v-61929a25-s="">2、这里运用到了css3的animation-timing-function的steps，减少动画过程的代码编写</p><p data-v-61929a25-s="">3、结合第2点，因为steps(number, position)的两个参数，第一个参数是设定有多少帧，第二个参数是设置动画的连续方式，所以根据steps的特性，我们生成的雪碧图需要无间隔并且连贯（我生成的就是从上到下排序下来的）</p><p data-v-61929a25-s="">这里推荐一个在线工具：<a href="https://www.toptal.com/developers/css/sprite-generator" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">快速生成雪碧图</a></p><p data-v-61929a25-s="">还有关于里面的steps的用法，可以参考张老师的文章：<a href="https://www.zhangxinxu.com/wordpress/2018/06/css3-animation-steps-step-start-end/" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">CSS3 animation属性中的steps功能符深入介绍 </a></p><h3 id="方案五：使用canvas逐帧绘制" data-v-61929a25-s=""><a class="header-anchor" href="#方案五：使用canvas逐帧绘制" aria-hidden="true" data-v-61929a25-s="">#</a> 方案五：使用canvas逐帧绘制</h3><p data-v-61929a25-s="">终于来到一开头提到的canvas实现方案了。大话官网专题，我看了一下源代码，虽然代码被混淆，但还是可以看出，应该是通过引入插件来实现的。</p><p data-v-61929a25-s=""><img src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2020/04/4.jpg" alt="" data-v-61929a25-s=""></p><p data-v-61929a25-s=""><img src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2020/04/5.jpg" alt="" data-v-61929a25-s=""></p><p data-v-61929a25-s="">我们自己写其实也不难，因为知道了本身的实现套路（有逐帧素材，然后通过逐帧逐帧去绘制渲染出来），那就可以着手编写代码了。</p><p data-v-61929a25-s="">【推荐】★★★★★</p><p data-v-61929a25-s="">【优点】canvas在性能上有天然的优势，对于高频率的更新渲染，用canvas重绘来实现效果更佳。</p><p data-v-61929a25-s="">【弊端】古董机对canvas的兼容性不太友好，如果可以抛弃这些古董用户的话，还是推荐这个方案！</p><pre class="language-javascript" data-v-61929a25-s=""><code class="language-javascript" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">// html</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span>section <span class="token keyword" data-v-61929a25-s="">class</span><span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"section section-05"</span><span class="token operator" data-v-61929a25-s="">&gt;</span>
  <span class="token operator" data-v-61929a25-s="">&lt;</span>div <span class="token keyword" data-v-61929a25-s="">class</span><span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"img"</span><span class="token operator" data-v-61929a25-s="">&gt;</span><span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>div<span class="token operator" data-v-61929a25-s="">&gt;</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>section<span class="token operator" data-v-61929a25-s="">&gt;</span>

<span class="token comment" data-v-61929a25-s="">// js</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span>script type<span class="token operator" data-v-61929a25-s="">=</span><span class="token string" data-v-61929a25-s="">"text/javascript"</span><span class="token operator" data-v-61929a25-s="">&gt;</span>
  <span class="token keyword" data-v-61929a25-s="">const</span> sloganCanvas <span class="token operator" data-v-61929a25-s="">=</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
    index<span class="token operator" data-v-61929a25-s="">:</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    indexMax<span class="token operator" data-v-61929a25-s="">:</span> <span class="token number" data-v-61929a25-s="">29</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    canvasWidth<span class="token operator" data-v-61929a25-s="">:</span> <span class="token number" data-v-61929a25-s="">801</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    canvasHeight<span class="token operator" data-v-61929a25-s="">:</span> <span class="token number" data-v-61929a25-s="">301</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    <span class="token function" data-v-61929a25-s="">init</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">{</span>
      <span class="token comment" data-v-61929a25-s="">// 创建画布</span>
      <span class="token keyword" data-v-61929a25-s="">const</span> canvas <span class="token operator" data-v-61929a25-s="">=</span> document<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">createElement</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token string" data-v-61929a25-s="">'canvas'</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
      canvas<span class="token punctuation" data-v-61929a25-s="">[</span><span class="token string" data-v-61929a25-s="">'width'</span><span class="token punctuation" data-v-61929a25-s="">]</span> <span class="token operator" data-v-61929a25-s="">=</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>canvasWidth<span class="token punctuation" data-v-61929a25-s="">;</span>
      canvas<span class="token punctuation" data-v-61929a25-s="">[</span><span class="token string" data-v-61929a25-s="">'height'</span><span class="token punctuation" data-v-61929a25-s="">]</span> <span class="token operator" data-v-61929a25-s="">=</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>canvasHeight<span class="token punctuation" data-v-61929a25-s="">;</span>
      document<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">querySelector</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token string" data-v-61929a25-s="">'.section-05 .img'</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">appendChild</span><span class="token punctuation" data-v-61929a25-s="">(</span>canvas<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>

      <span class="token comment" data-v-61929a25-s="">// 绘制内容</span>
      <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">draw</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index<span class="token punctuation" data-v-61929a25-s="">,</span> canvas<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
    <span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    <span class="token function" data-v-61929a25-s="">draw</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token parameter" data-v-61929a25-s="">index<span class="token punctuation" data-v-61929a25-s="">,</span> canvas</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">{</span>
      <span class="token keyword" data-v-61929a25-s="">const</span> context <span class="token operator" data-v-61929a25-s="">=</span> canvas<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">getContext</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token string" data-v-61929a25-s="">'2d'</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
      <span class="token keyword" data-v-61929a25-s="">const</span> img <span class="token operator" data-v-61929a25-s="">=</span> <span class="token keyword" data-v-61929a25-s="">new</span> <span class="token class-name" data-v-61929a25-s="">Image</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
      img<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function-variable function" data-v-61929a25-s="">onload</span> <span class="token operator" data-v-61929a25-s="">=</span> <span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span> <span class="token operator" data-v-61929a25-s="">=&gt;</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
        <span class="token comment" data-v-61929a25-s="">// 绘制前先清空画布</span>
        context<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">clearRect</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>canvasWidth<span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>canvasHeight<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>

        <span class="token comment" data-v-61929a25-s="">// 然后再绘制当前帧</span>
        context<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">drawImage</span><span class="token punctuation" data-v-61929a25-s="">(</span>img<span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>canvasWidth<span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>canvasHeight<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>

        <span class="token comment" data-v-61929a25-s="">// 画完更换下一帧的索引</span>
        <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index <span class="token operator" data-v-61929a25-s="">&lt;</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>indexMax <span class="token operator" data-v-61929a25-s="">?</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index<span class="token operator" data-v-61929a25-s="">++</span> <span class="token operator" data-v-61929a25-s="">:</span> <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index <span class="token operator" data-v-61929a25-s="">=</span> <span class="token number" data-v-61929a25-s="">0</span><span class="token punctuation" data-v-61929a25-s="">;</span>
        <span class="token function" data-v-61929a25-s="">setTimeout</span><span class="token punctuation" data-v-61929a25-s="">(</span> <span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span> <span class="token operator" data-v-61929a25-s="">=&gt;</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
          <span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">draw</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index<span class="token punctuation" data-v-61929a25-s="">,</span> canvas<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
        <span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token number" data-v-61929a25-s="">100</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
      <span class="token punctuation" data-v-61929a25-s="">}</span>
      img<span class="token punctuation" data-v-61929a25-s="">.</span>src <span class="token operator" data-v-61929a25-s="">=</span> <span class="token template-string" data-v-61929a25-s=""><span class="token template-punctuation string" data-v-61929a25-s="">`</span><span class="token string" data-v-61929a25-s="">img/</span><span class="token interpolation" data-v-61929a25-s=""><span class="token interpolation-punctuation punctuation" data-v-61929a25-s="">${</span><span class="token keyword" data-v-61929a25-s="">this</span><span class="token punctuation" data-v-61929a25-s="">.</span>index<span class="token interpolation-punctuation punctuation" data-v-61929a25-s="">}</span></span><span class="token string" data-v-61929a25-s="">.png</span><span class="token template-punctuation string" data-v-61929a25-s="">`</span></span><span class="token punctuation" data-v-61929a25-s="">;</span>
    <span class="token punctuation" data-v-61929a25-s="">}</span>
  <span class="token punctuation" data-v-61929a25-s="">}</span>
  sloganCanvas<span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">init</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
<span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token operator" data-v-61929a25-s="">/</span>script<span class="token operator" data-v-61929a25-s="">&gt;</span>
</code></pre><p data-v-61929a25-s="">实现思路：</p><p data-v-61929a25-s="">1、动态创建canvas，不要写死canvas的宽度和高度，实际需求如果要覆盖移动端，请动态计算尺寸后生成（官网专题是不做移动端了，移动端纯jpg图，感觉有点可惜）</p><p data-v-61929a25-s="">2、载入每帧的素材的时候，后续操作都要放在img的onload事件里执行</p><p data-v-61929a25-s="">3、每次进行绘制之前，记得先清空画布，否则会一直叠加绘制，就没法看了…</p><p data-v-61929a25-s="">4、通过setTimeout的延时回调控制无限循环动画的速度</p><h2 id="最后" data-v-61929a25-s=""><a class="header-anchor" href="#最后" aria-hidden="true" data-v-61929a25-s="">#</a> 最后</h2><p data-v-61929a25-s="">有几个方案我没有写，关于svg对这个需求的实现，暂时没有思路，我选择放弃，以后想到了再来补上！</p><p data-v-61929a25-s="">而视频和flash这些多媒体的展示方案，这里就略过了，处理成本对我来说还是比较高的，要配合设计的主视觉去输出优质的素材，我不太擅长…（所以这种方案可以考虑把活交给设计师…）</p><p data-v-61929a25-s="">最后放上demo地址：<a href="https://chengpeiquan.github.io/canvas-movie-jitter-effect/index.html" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">电影抖屏效果demo</a></p></div><!--]--><!--]--></section><section class="article-sidebar lg:flex hidden flex-col flex-shrink-0 ml-16" data-v-61929a25="" data-v-61ffcee1=""><!----><section class="mb-16" data-v-61ffcee1=""><h2 class="block-title" data-v-61ffcee1="">热门栏目</h2><div class="flex flex-col w-full" data-v-61ffcee1=""><a href="https://vue3.chengpeiquan.com/" target="_blank" data-v-61ffcee1=""><img class="w-full" src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2021/01/1-1.jpg" alt="Vue3.0学习教程与实战案例" data-v-61ffcee1=""></a></div></section><section class="mb-8" data-v-61ffcee1=""><div class="block-title flex justify-between items-center" data-v-61ffcee1=""><h2 data-v-61ffcee1="">猜你喜欢</h2><span class="text-base font-normal cursor-pointer select-none" data-v-61ffcee1=""> 换一换 </span></div><ul data-v-61ffcee1=""><!--[--><li class="flex mb-8" data-v-61ffcee1=""><div class="flex flex-shrink-0 w-16 h-12 overflow-hidden mr-4 rounded" data-v-61ffcee1=""><a href="/article/vue3-script-setup.html" title="聊一聊Vue3.0的script-setup 以及全新的props/emits专属API" class="" data-v-61ffcee1=""><img class="img" src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2021/02/20210305211036.jpg" alt="聊一聊Vue3.0的script-setup 以及全新的props/emits专属API" data-v-61ffcee1=""></a></div><a href="/article/vue3-script-setup.html" class="flex flex-1 line-clamp-2" title="聊一聊Vue3.0的script-setup 以及全新的props/emits专属API" data-v-61ffcee1=""><h2 class="article-title text-base" data-v-61ffcee1="">聊一聊Vue3.0的script-setup 以及全新的props/emits专属API</h2></a></li><li class="flex mb-8" data-v-61ffcee1=""><div class="flex flex-shrink-0 w-16 h-12 overflow-hidden mr-4 rounded" data-v-61ffcee1=""><a aria-current="page" href="/article/canvas-movie-jitter-effect.html" title="电影故障抖动视觉效果实现：对大话手游愚人节专题的探究" class="router-link-active router-link-exact-active" data-v-61ffcee1=""><img class="img" src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2020/04/1.jpg" alt="电影故障抖动视觉效果实现：对大话手游愚人节专题的探究" data-v-61ffcee1=""></a></div><a aria-current="page" href="/article/canvas-movie-jitter-effect.html" class="router-link-active router-link-exact-active flex flex-1 line-clamp-2" title="电影故障抖动视觉效果实现：对大话手游愚人节专题的探究" data-v-61ffcee1=""><h2 class="article-title text-base" data-v-61ffcee1="">电影故障抖动视觉效果实现：对大话手游愚人节专题的探究</h2></a></li><li class="flex mb-8" data-v-61ffcee1=""><div class="flex flex-shrink-0 w-16 h-12 overflow-hidden mr-4 rounded" data-v-61ffcee1=""><a href="/article/rewrite-in-vite.html" title="重构于Vite" class="" data-v-61ffcee1=""><img class="img" src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2021/02/20210219234631.jpg" alt="重构于Vite" data-v-61ffcee1=""></a></div><a href="/article/rewrite-in-vite.html" class="flex flex-1 line-clamp-2" title="重构于Vite" data-v-61ffcee1=""><h2 class="article-title text-base" data-v-61ffcee1="">重构于Vite</h2></a></li><li class="flex mb-8" data-v-61ffcee1=""><div class="flex flex-shrink-0 w-16 h-12 overflow-hidden mr-4 rounded" data-v-61ffcee1=""><a href="/article/api-design.html" title="接口设计：从前端开发的角度谈一谈接口规范" class="" data-v-61ffcee1=""><img class="img" src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2020/02/1.jpg" alt="接口设计：从前端开发的角度谈一谈接口规范" data-v-61ffcee1=""></a></div><a href="/article/api-design.html" class="flex flex-1 line-clamp-2" title="接口设计：从前端开发的角度谈一谈接口规范" data-v-61ffcee1=""><h2 class="article-title text-base" data-v-61ffcee1="">接口设计：从前端开发的角度谈一谈接口规范</h2></a></li><!--]--></ul></section></section><!--]--></main><!--[--><footer class="flex justify-center items-center w-full h-36 opacity-70 md:text-sm text-xs"><span>© 2023 服务端技术</span><br><a class="md:ml-12 ml-2" href="https://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener noreferrer">粤ICP备19128351号-2</a></footer><!----><!--]--><!--]--></div>
    
  

</body></html>