<!DOCTYPE html><html lang="en"><head>
    <meta charset="UTF-8">
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>聊一聊Vue3.0的script-setup 以及全新的props/emits专属API</title>
  <script type="module" crossorigin="" src="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/app.0f81359a.js"></script>
  <link rel="modulepreload" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/vendor.43d648f2.js">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/app.a645265b.css">
<link rel="manifest" href="/manifest.webmanifest">
<script src="/registerSW.js"></script>
<link rel="modulepreload" crossorigin="" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/vue3-script-setup.5f3a297a.js"><link rel="modulepreload" crossorigin="" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/Detail.vue_vue&amp;type=script&amp;setup=true&amp;lang.f4dbd703.js"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/Detail.vue_vue&amp;type=script&amp;setup=true&amp;lang.af6bf2c8.css"><link rel="modulepreload" crossorigin="" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/Sidebar.c8891f56.js"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/zhixinpeng/yumol.cn@gh-pages/assets/Sidebar.2512c403.css"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/zhixinpeng/storage/img/avatar_300x300.png"><meta name="theme-color" content="#111111"><meta property="og:title" content="聊一聊Vue3.0的script-setup 以及全新的props/emits专属API - 服务端技术"><meta name="description" content="今天想聊一聊 Vue 3.0 的 script-setup，以及目前三个很少被提及到的 API —— defineProps 、 defineEmit 和 useContext。截止到我撰写本文，它们在 Vue 3.0 的官网都还没有相关的用法说明，因为目前还属于实验性的新特性，什么时候会并入正式轨道，时间上还不清楚，但事实上在项目里已经可以使用起来了，自己体验了一段时间，真的爽！！！"><meta name="keywords" content="script setup,vue 3.0 script setup,vue3 script setup,script setup prop,script setup emit,defineProps,vue 3.0 defineProps,vue defineProps,vue3 defineProps,prop defineProps,setup defineProps,defineEmit,vue 3.0 defineEmit,vue defineEmit,vue3 defineEmit,emit defineEmit,setup defineEmit,useContext,vue 3.0 useContext,vue useContext,vue3 useContext,setup useContext"><meta name="head:count" content="5"></head>
  <body>
    <div id="app" data-server-rendered="true"><!--[--><header class="flex justify-between items-center w-full md:h-24 h-14 px-4 border-b-4 dark:border-white dark:border-opacity-5 bg-white bg-opacity-5" data-v-74d4f9c0=""><div class="flex justify-start items-center" data-v-74d4f9c0=""><div class="flex flex-shrink-0 md:w-14 w-8 md:h-14 h-8 rounded-full overflow-hidden" data-v-74d4f9c0=""><img class="img" src="https://cdn.jsdelivr.net/gh/zhixinpeng/storage/img/avatar_60x60.png" alt="服务端技术" width="56" height="56" data-v-74d4f9c0=""></div><span class="md:ml-4 ml-2 md:text-2xl text-xl" data-v-74d4f9c0="">服务端技术</span></div><nav class="nav flex flex-1 justify-end items-center text-xl" data-v-74d4f9c0=""><a class="select-none mr-4" data-v-74d4f9c0=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" style="vertical-align:middle;transform:translateY(-5%);" data-v-74d4f9c0=""><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" style="vertical-align:middle;transform:translateY(-5%);display:none;" data-v-74d4f9c0=""><path d="M12 10.586l4.95-4.95l1.414 1.414l-4.95 4.95l4.95 4.95l-1.414 1.414l-4.95-4.95l-4.95 4.95l-1.414-1.414l4.95-4.95l-4.95-4.95L7.05 5.636z" fill="currentColor"></path></svg></a><a class="select-none text-xl" title="切换到暗黑模式" data-v-74d4f9c0=""><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" style="vertical-align:middle;transform:translateY(-5%);display:none;" data-v-74d4f9c0=""><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938A7.999 7.999 0 0 0 4 12z" fill="currentColor"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1.2em" height="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" style="vertical-align:middle;transform:translateY(-5%);" data-v-74d4f9c0=""><path d="M12 18a6 6 0 1 1 0-12a6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636L5.636 7.05L3.515 4.93zM16.95 18.364l1.414-1.414l2.121 2.121l-1.414 1.414l-2.121-2.121zm2.121-14.85l1.414 1.415l-2.121 2.121l-1.414-1.414l2.121-2.121zM5.636 16.95l1.414 1.414l-2.121 2.121l-1.414-1.414l2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z" fill="currentColor"></path></svg></a><!----></nav></header><main class="flex justify-between container md:mx-auto box-border px-4 md:mt-16 mt-4"><!--[--><section class="article-detail flex justify-start flex-col flex-1 md:w-auto w-full overflow-hidden" data-v-61929a25=""><h1 class="flex items-center w-full md:text-3xl text-xl md:mb-4 mb-2" data-v-61929a25="">聊一聊Vue3.0的script-setup 以及全新的props/emits专属API</h1><p class="flex items-center w-full text-sm text-gray-400 md:mb-8 mb-4 md:pb-8 pb-4 border-b dark:border-white dark:border-opacity-5" data-v-61929a25=""><span class="mr-8" data-v-61929a25="">作者：彭智鑫</span><span title="2021/03/05" data-v-61929a25="">2021/03/05</span></p><p class="flex justify-center items-center w-full p-4 md:mb-8 mb-4 bg-gray-50 dark:bg-white dark:bg-opacity-5 rounded text-gray-600 dark:text-gray-300 text-sm" data-v-61929a25=""> 本文最后更新于 745 天前，部分内容可能不适合当前所有情况，仅供参考。 </p><!--[--><!--[--><div class="article-content prose mx-auto" data-v-61929a25-s=""><p data-v-61929a25-s=""></p><div class="article-toc prose" data-v-61929a25-s=""><ul data-v-61929a25-s=""><li data-v-61929a25-s=""><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-script-setup" data-v-61929a25-s=""> 什么是 script-setup</a></li><li data-v-61929a25-s=""><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-props-%E5%92%8C-emits" data-v-61929a25-s=""> 什么是 props 和 emits</a></li><li data-v-61929a25-s=""><a href="#%E4%BB%80%E4%B9%88%E6%98%AF-defineprops-%E5%92%8C-defineemit" data-v-61929a25-s=""> 什么是 defineProps 和 defineEmit</a></li><li data-v-61929a25-s=""><a href="#defineprops" data-v-61929a25-s=""> defineProps</a><ul data-v-61929a25-s=""><li data-v-61929a25-s=""><a href="#%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95" data-v-61929a25-s=""> 基础用法</a></li><li data-v-61929a25-s=""><a href="#%E9%80%9A%E8%BF%87%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E8%BF%9B%E8%A1%8C%E6%A3%80%E6%9F%A5" data-v-61929a25-s=""> 通过构造函数进行检查</a></li><li data-v-61929a25-s=""><a href="#%E4%BD%BF%E7%94%A8%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3%E8%BF%9B%E8%A1%8C%E6%A3%80%E6%9F%A5" data-v-61929a25-s=""> 使用类型注解进行检查</a></li></ul></li><li data-v-61929a25-s=""><a href="#defineemit" data-v-61929a25-s=""> defineEmit</a></li><li data-v-61929a25-s=""><a href="#usecontext" data-v-61929a25-s=""> useContext</a></li><li data-v-61929a25-s=""><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99" data-v-61929a25-s=""> 参考资料</a></li><li data-v-61929a25-s=""><a href="#%E7%BB%93%E8%AF%AD" data-v-61929a25-s=""> 结语</a></li></ul></div><p></p><p data-v-61929a25-s="">今天想聊一聊 Vue 3.0 的 script-setup，以及目前三个很少被提及到的 API —— defineProps 、 defineEmit 和 useContext。</p><p data-v-61929a25-s="">截止到我撰写本文，它们在 Vue 3.0 的官网都还没有相关的用法说明，<strong data-v-61929a25-s="">因为目前还属于实验性的新特性</strong>，什么时候会并入正式轨道，时间上还不清楚，但事实上在项目里已经可以使用起来了，自己体验了一段时间，真的爽！！！</p><p data-v-61929a25-s="">目前在社区讨论方面，script-setup 的知名度还是可以的，但是对应的另外 3 个专属 API 还是比较默默无名，这说明什么？看热闹的人多，实际体验的人少。</p><p data-v-61929a25-s="">很多人应该还只是处于单纯知道 script-setup 对于原来的 setup 起到什么样的便利性，但一旦哪天真的想用起来，会发现不知道 props 怎么用，不知道 emit 怎么用，用法完全变了，还一时半会搜不到文档，关键时刻被卡住（这一点在 stackoverflow 上的问题咨询体现的比较明显），这也是我想写一写这篇文章的目的，提前科普这几个新特性。</p><blockquote data-v-61929a25-s=""><p data-v-61929a25-s=""><br data-v-61929a25-s="">在阅读这篇文章之前，需要对 Vue 3.0 的 setup 函数有一定的了解，如果还处于完全没有接触过的阶段，请先抽点时间阅读 <a href="https://vue3.chengpeiquan.com/component.html" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">单组件的编写 - Vue3.0学习教程与实战案例</a> 。<br data-v-61929a25-s=""><br data-v-61929a25-s="">另外，根据 vue-next 的 <a href="https://github.com/vuejs/vue-next/blob/master/CHANGELOG.md" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">changelog</a> ，记得先把 vue 和 @vue/compiler-sfc 这两个依赖都升级到 v3.0.4 版本或以上（这两个依赖必须保持同样的版本号，我自己是在目前最新的 v3.0.7 版本下跑通了所有 API，版本太低会报错，因为旧版本还没有包含更新的内容）<br data-v-61929a25-s=""></p></blockquote><p data-v-61929a25-s="">本文会划分为四个部分：</p><ol data-v-61929a25-s=""><li data-v-61929a25-s=""><p data-v-61929a25-s="">讲一讲 script-setup</p></li><li data-v-61929a25-s=""><p data-v-61929a25-s="">回顾一下 props 和 emits</p></li><li data-v-61929a25-s=""><p data-v-61929a25-s="">讲一讲 defineProps 和 defineEmit</p></li><li data-v-61929a25-s=""><p data-v-61929a25-s="">讲一讲 useContext</p></li></ol><p data-v-61929a25-s="">通过这几个维度来讲一讲这个便捷版 setup 的用法和需要注意的问题。</p><h2 id="什么是-script-setup" data-v-61929a25-s=""><a class="header-anchor" href="#什么是-script-setup" aria-hidden="true" data-v-61929a25-s="">#</a> 什么是 script-setup</h2><p data-v-61929a25-s="">在 Vue 3.0 的 .vue 组件里，标准的 setup 用法，默认的 SFC 规范里（注：SFC，即 Single-File Component，<code data-v-61929a25-s="">.vue</code> 单组件）要求，在 setup 里面定义的数据如果需要在 template 使用，都需要 return 出来，如果你使用的是 TypeScript ，还需要借助 defineComponent 来帮助你对类型的自动推导。</p><pre class="language-html" data-v-61929a25-s=""><code class="language-html" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">&lt;!-- 标准组件格式 --&gt;</span>
<span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;</span>script</span> <span class="token attr-name" data-v-61929a25-s="">lang</span><span class="token attr-value" data-v-61929a25-s=""><span class="token punctuation attr-equals" data-v-61929a25-s="">=</span><span class="token punctuation" data-v-61929a25-s="">"</span>ts<span class="token punctuation" data-v-61929a25-s="">"</span></span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span><span class="token script" data-v-61929a25-s=""><span class="token language-javascript" data-v-61929a25-s="">
<span class="token keyword" data-v-61929a25-s="">import</span> <span class="token punctuation" data-v-61929a25-s="">{</span> defineComponent <span class="token punctuation" data-v-61929a25-s="">}</span> <span class="token keyword" data-v-61929a25-s="">from</span> <span class="token string" data-v-61929a25-s="">'vue'</span>

<span class="token keyword" data-v-61929a25-s="">export</span> <span class="token keyword" data-v-61929a25-s="">default</span> <span class="token function" data-v-61929a25-s="">defineComponent</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">{</span>
  <span class="token function" data-v-61929a25-s="">setup</span> <span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
    
    <span class="token comment" data-v-61929a25-s="">// 要给 template 用的数据需要 return 出来才可以</span>
    <span class="token keyword" data-v-61929a25-s="">return</span> <span class="token punctuation" data-v-61929a25-s="">{</span><span class="token punctuation" data-v-61929a25-s="">}</span>
  <span class="token punctuation" data-v-61929a25-s="">}</span>
<span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">)</span>
</span></span><span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;/</span>script</span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span>
</code></pre><p data-v-61929a25-s="">关于 setup 和 defineComponent 的说明和用法，可以查阅我以前写的 <a href="https://vue3.chengpeiquan.com/component.html#%E5%85%A8%E6%96%B0%E7%9A%84-setup-%E5%87%BD%E6%95%B0-new" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">全新的 setup 函数</a> 。</p><p data-v-61929a25-s="">而 script-setup 的推出是为了让熟悉 3.0 的用户可以更高效率的开发组件，减少一些心智负担，只需要给 script 标签添加一个 setup 属性，那么整个 script 就直接会变成 setup 函数，所有顶级变量、函数，均会自动暴露给模板使用（无需再一个个 return 了）。</p><p data-v-61929a25-s="">Vue 会通过单组件编译器，在编译的时候将其处理回标准组件，所以目前这个方案只适合用 <code data-v-61929a25-s="">.vue</code> 文件写的工程化项目。</p><pre class="language-html" data-v-61929a25-s=""><code class="language-html" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">&lt;!-- 使用 script-setup 格式 --&gt;</span>
<span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;</span>script</span> <span class="token attr-name" data-v-61929a25-s="">setup</span> <span class="token attr-name" data-v-61929a25-s="">lang</span><span class="token attr-value" data-v-61929a25-s=""><span class="token punctuation attr-equals" data-v-61929a25-s="">=</span><span class="token punctuation" data-v-61929a25-s="">"</span>ts<span class="token punctuation" data-v-61929a25-s="">"</span></span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span><span class="token script" data-v-61929a25-s=""><span class="token language-javascript" data-v-61929a25-s="">
  <span class="token comment" data-v-61929a25-s="">// ...</span>
</span></span><span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;/</span>script</span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span>
</code></pre><p data-v-61929a25-s="">对，就是这样，代码量瞬间大幅度减少……</p><p data-v-61929a25-s="">而组件的挂载，在原来的写法是需要 import 后再放到 components 里才能够启用：</p><pre class="language-html" data-v-61929a25-s=""><code class="language-html" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">&lt;!-- 标准组件格式 --&gt;</span>
<span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;</span>script</span> <span class="token attr-name" data-v-61929a25-s="">lang</span><span class="token attr-value" data-v-61929a25-s=""><span class="token punctuation attr-equals" data-v-61929a25-s="">=</span><span class="token punctuation" data-v-61929a25-s="">"</span>ts<span class="token punctuation" data-v-61929a25-s="">"</span></span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span><span class="token script" data-v-61929a25-s=""><span class="token language-javascript" data-v-61929a25-s="">
<span class="token keyword" data-v-61929a25-s="">import</span> <span class="token punctuation" data-v-61929a25-s="">{</span> defineComponent <span class="token punctuation" data-v-61929a25-s="">}</span> <span class="token keyword" data-v-61929a25-s="">from</span> <span class="token string" data-v-61929a25-s="">'vue'</span>

<span class="token comment" data-v-61929a25-s="">// 需要先导入组件</span>
<span class="token keyword" data-v-61929a25-s="">import</span> Header <span class="token keyword" data-v-61929a25-s="">from</span> <span class="token string" data-v-61929a25-s="">'@cp/Header.vue'</span>

<span class="token keyword" data-v-61929a25-s="">export</span> <span class="token keyword" data-v-61929a25-s="">default</span> <span class="token function" data-v-61929a25-s="">defineComponent</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">{</span>
  <span class="token comment" data-v-61929a25-s="">// 需要通过 components 才能启用子组件</span>
  components<span class="token operator" data-v-61929a25-s="">:</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
    Header
  <span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">,</span>
  <span class="token function" data-v-61929a25-s="">setup</span> <span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
    <span class="token comment" data-v-61929a25-s="">// ...</span>
  <span class="token punctuation" data-v-61929a25-s="">}</span>
<span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">)</span>
</span></span><span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;/</span>script</span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span>
</code></pre><p data-v-61929a25-s="">在 script-setup 模式下，只需要导入组件即可，编译器会自动识别并启用。</p><pre class="language-html" data-v-61929a25-s=""><code class="language-html" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">&lt;!-- 使用 script-setup 格式 --&gt;</span>
<span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;</span>script</span> <span class="token attr-name" data-v-61929a25-s="">setup</span> <span class="token attr-name" data-v-61929a25-s="">lang</span><span class="token attr-value" data-v-61929a25-s=""><span class="token punctuation attr-equals" data-v-61929a25-s="">=</span><span class="token punctuation" data-v-61929a25-s="">"</span>ts<span class="token punctuation" data-v-61929a25-s="">"</span></span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span><span class="token script" data-v-61929a25-s=""><span class="token language-javascript" data-v-61929a25-s="">
<span class="token keyword" data-v-61929a25-s="">import</span> Header <span class="token keyword" data-v-61929a25-s="">from</span> <span class="token string" data-v-61929a25-s="">'@cp/Header.vue'</span>
</span></span><span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;/</span>script</span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span>
</code></pre><p data-v-61929a25-s="">其他的变量、函数，以及 onMounted 等生命周期，还有像 watch 、 computed 等监听/计算功能，都跟原来一样定义就可以了，没有太大的区别。</p><p data-v-61929a25-s="">区别比较大的还是 props / emits 的定义和调用，由于在 export 组件的时候没有了对象式选项，setup 也没有了函数入参，标准组件的用法无法直接迁移到 script-setup ，因此针对该模式， Vue 3.0 单独推出了三个专属的 API：defineProps 、 defineEmit 和 useContext 。</p><p data-v-61929a25-s="">在了解它俩之前，想先给大家回顾下什么是 props 和 emits ，已经了解熟悉它们的同学可以直接跳去本文 <a href="#%E4%BB%80%E4%B9%88%E6%98%AF-defineprops-%E5%92%8C-defineemit" data-v-61929a25-s="">什么是 defineProps 和 defineEmit</a> 部分。</p><h2 id="什么是-props-和-emits" data-v-61929a25-s=""><a class="header-anchor" href="#什么是-props-和-emits" aria-hidden="true" data-v-61929a25-s="">#</a> 什么是 props 和 emits</h2><p data-v-61929a25-s="">通常我们为了避免一个页面（父组件）写的又长又臭，会根据布局/功能模块，把页面切割为不同的小模块（子组件），最后再像搭积木一样把它搭回来，完成我们的作品，我画了一个示例图，就是下面这样子：</p><p data-v-61929a25-s=""><img src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2021/01/20210303180727.png" alt="每一个“积木”都是一个组件" data-v-61929a25-s=""></p><p data-v-61929a25-s="">比如上面是一个 home.vue , 它包含了 Header.vue / Footer.vue / Content.vue / Sidebar.vue 等子组件，如果此时页面上有一个公共的数据，有多个子组件都需要用到的话，就没有必要在诸如 Content / Sidebar 里分别获取或者定义了，而是在父组件 home 里面处理好后，传递给子组件使用。</p><p data-v-61929a25-s="">props 就是在这种情况下用于父组件向子组件传递数据，而 emits 则是让子组件可以向父组件发起通信。</p><p data-v-61929a25-s="">在 home.vue 定义了一个数据和方法之后，传递给子组件 Content.vue ：</p><pre class="language-html" data-v-61929a25-s=""><code class="language-html" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;</span>template</span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span>
  <span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;</span>Content</span>
    <span class="token attr-name" data-v-61929a25-s="">:name</span><span class="token attr-value" data-v-61929a25-s=""><span class="token punctuation attr-equals" data-v-61929a25-s="">=</span><span class="token punctuation" data-v-61929a25-s="">"</span>name<span class="token punctuation" data-v-61929a25-s="">"</span></span>
    <span class="token attr-name" data-v-61929a25-s="">@change-name</span><span class="token attr-value" data-v-61929a25-s=""><span class="token punctuation attr-equals" data-v-61929a25-s="">=</span><span class="token punctuation" data-v-61929a25-s="">"</span>changeName<span class="token punctuation" data-v-61929a25-s="">"</span></span>
  <span class="token punctuation" data-v-61929a25-s="">/&gt;</span></span>
<span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;/</span>template</span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span>

<span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;</span>script</span> <span class="token attr-name" data-v-61929a25-s="">lang</span><span class="token attr-value" data-v-61929a25-s=""><span class="token punctuation attr-equals" data-v-61929a25-s="">=</span><span class="token punctuation" data-v-61929a25-s="">"</span>ts<span class="token punctuation" data-v-61929a25-s="">"</span></span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span><span class="token script" data-v-61929a25-s=""><span class="token language-javascript" data-v-61929a25-s="">
<span class="token keyword" data-v-61929a25-s="">import</span> <span class="token punctuation" data-v-61929a25-s="">{</span> defineComponent<span class="token punctuation" data-v-61929a25-s="">,</span> ref <span class="token punctuation" data-v-61929a25-s="">}</span> <span class="token keyword" data-v-61929a25-s="">from</span> <span class="token string" data-v-61929a25-s="">'vue'</span>
<span class="token keyword" data-v-61929a25-s="">import</span> Content <span class="token keyword" data-v-61929a25-s="">from</span> <span class="token string" data-v-61929a25-s="">'@cp/Content.vue'</span>

<span class="token keyword" data-v-61929a25-s="">export</span> <span class="token keyword" data-v-61929a25-s="">default</span> <span class="token function" data-v-61929a25-s="">defineComponent</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">{</span>
  components<span class="token operator" data-v-61929a25-s="">:</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
    Content
  <span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">,</span>
  <span class="token function" data-v-61929a25-s="">setup</span> <span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
    <span class="token keyword" data-v-61929a25-s="">const</span> name <span class="token operator" data-v-61929a25-s="">=</span> ref<span class="token operator" data-v-61929a25-s="">&lt;</span>string<span class="token operator" data-v-61929a25-s="">&gt;</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token string" data-v-61929a25-s="">'Petter'</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>

    <span class="token keyword" data-v-61929a25-s="">const</span> changeName <span class="token operator" data-v-61929a25-s="">=</span> <span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token operator" data-v-61929a25-s="">:</span> <span class="token parameter" data-v-61929a25-s=""><span class="token keyword" data-v-61929a25-s="">void</span></span> <span class="token operator" data-v-61929a25-s="">=&gt;</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
      name<span class="token punctuation" data-v-61929a25-s="">.</span>value <span class="token operator" data-v-61929a25-s="">=</span> <span class="token string" data-v-61929a25-s="">'Tom'</span><span class="token punctuation" data-v-61929a25-s="">;</span>
    <span class="token punctuation" data-v-61929a25-s="">}</span>

    <span class="token keyword" data-v-61929a25-s="">return</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
      name<span class="token punctuation" data-v-61929a25-s="">,</span>
      changeName
    <span class="token punctuation" data-v-61929a25-s="">}</span>
  <span class="token punctuation" data-v-61929a25-s="">}</span>
<span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">)</span>
</span></span><span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;/</span>script</span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span>
</code></pre><p data-v-61929a25-s="">子组件通过 prop 来接收 name 数据，通过 emit 来接收和提交名字的变更方法 changeName ：</p><pre class="language-html" data-v-61929a25-s=""><code class="language-html" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;</span>script</span> <span class="token attr-name" data-v-61929a25-s="">lang</span><span class="token attr-value" data-v-61929a25-s=""><span class="token punctuation attr-equals" data-v-61929a25-s="">=</span><span class="token punctuation" data-v-61929a25-s="">"</span>ts<span class="token punctuation" data-v-61929a25-s="">"</span></span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span><span class="token script" data-v-61929a25-s=""><span class="token language-javascript" data-v-61929a25-s="">
<span class="token keyword" data-v-61929a25-s="">import</span> <span class="token punctuation" data-v-61929a25-s="">{</span> defineComponent <span class="token punctuation" data-v-61929a25-s="">}</span> <span class="token keyword" data-v-61929a25-s="">from</span> <span class="token string" data-v-61929a25-s="">'vue'</span>

<span class="token keyword" data-v-61929a25-s="">export</span> <span class="token keyword" data-v-61929a25-s="">default</span> <span class="token function" data-v-61929a25-s="">defineComponent</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">{</span>
  props<span class="token operator" data-v-61929a25-s="">:</span> <span class="token punctuation" data-v-61929a25-s="">[</span> <span class="token string" data-v-61929a25-s="">'name'</span> <span class="token punctuation" data-v-61929a25-s="">]</span><span class="token punctuation" data-v-61929a25-s="">,</span>
  emits<span class="token operator" data-v-61929a25-s="">:</span> <span class="token punctuation" data-v-61929a25-s="">[</span> <span class="token string" data-v-61929a25-s="">'changeName'</span> <span class="token punctuation" data-v-61929a25-s="">]</span><span class="token punctuation" data-v-61929a25-s="">,</span>
  <span class="token function" data-v-61929a25-s="">setup</span> <span class="token punctuation" data-v-61929a25-s="">(</span><span class="token parameter" data-v-61929a25-s="">props<span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token punctuation" data-v-61929a25-s="">{</span> emit <span class="token punctuation" data-v-61929a25-s="">}</span></span><span class="token punctuation" data-v-61929a25-s="">)</span> <span class="token punctuation" data-v-61929a25-s="">{</span>

    <span class="token function" data-v-61929a25-s="">setTimeout</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span> <span class="token operator" data-v-61929a25-s="">=&gt;</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
      <span class="token function" data-v-61929a25-s="">emit</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token string" data-v-61929a25-s="">'changeName'</span><span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token string" data-v-61929a25-s="">'Tom'</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
    <span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token number" data-v-61929a25-s="">1000</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
    
  <span class="token punctuation" data-v-61929a25-s="">}</span>
<span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">)</span>
</span></span><span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;/</span>script</span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span>
</code></pre><p data-v-61929a25-s="">当然，这里不是想说 props 和 emits 怎么用，关于 props 和 emits 的定义和具体用法，在 <a href="https://vue3.chengpeiquan.com/communication.html#props-emits" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">props / emits</a> 一节已有详细的总结和案例，这篇文章里就不再展开更多说明啦！</p><h2 id="什么是-defineprops-和-defineemit" data-v-61929a25-s=""><a class="header-anchor" href="#什么是-defineprops-和-defineemit" aria-hidden="true" data-v-61929a25-s="">#</a> 什么是 defineProps 和 defineEmit</h2><p data-v-61929a25-s="">回来说这两个 API ，顾名思义， defineProps 一看就知道是用来定义 props 的，而 defineEmit 则是用来定义 emits 的，那么它俩跟上面提到的 props / emits 有什么区别？</p><p data-v-61929a25-s="">在你的项目 <code data-v-61929a25-s="">node_modules\@vue\runtime-core\dist\runtime-core.d.ts</code> 里，有一段针对该 API 的注释（不要问我怎么找到这里的，我只能跟你说我用的 VSCode …）：</p><pre class="language-ts" data-v-61929a25-s=""><code class="language-ts" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">/**
 * Compile-time-only helper used for declaring props inside `&lt;script setup&gt;`.
 * This is stripped away in the compiled code and should never be actually
 * called at runtime.
 */</span>
</code></pre><p data-v-61929a25-s="">很清晰的解释了它们的使用限制，只能用于 script-setup 。</p><p data-v-61929a25-s="">那么我们来看下用便捷版 setup 写法之后，父组件长什么样：</p><pre class="language-html" data-v-61929a25-s=""><code class="language-html" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">&lt;!-- 这是父组件，template 下发了 prop 和 emit --&gt;</span>
<span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;</span>template</span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span>
  <span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;</span>Child</span>
    <span class="token attr-name" data-v-61929a25-s="">:name</span><span class="token attr-value" data-v-61929a25-s=""><span class="token punctuation attr-equals" data-v-61929a25-s="">=</span><span class="token punctuation" data-v-61929a25-s="">"</span>name<span class="token punctuation" data-v-61929a25-s="">"</span></span>
    <span class="token attr-name" data-v-61929a25-s="">@change-name</span><span class="token attr-value" data-v-61929a25-s=""><span class="token punctuation attr-equals" data-v-61929a25-s="">=</span><span class="token punctuation" data-v-61929a25-s="">"</span>changeName<span class="token punctuation" data-v-61929a25-s="">"</span></span>
  <span class="token punctuation" data-v-61929a25-s="">/&gt;</span></span>
<span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;/</span>template</span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span>

<span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;</span>script</span> <span class="token attr-name" data-v-61929a25-s="">setup</span> <span class="token attr-name" data-v-61929a25-s="">lang</span><span class="token attr-value" data-v-61929a25-s=""><span class="token punctuation attr-equals" data-v-61929a25-s="">=</span><span class="token punctuation" data-v-61929a25-s="">"</span>ts<span class="token punctuation" data-v-61929a25-s="">"</span></span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span><span class="token script" data-v-61929a25-s=""><span class="token language-javascript" data-v-61929a25-s="">
<span class="token keyword" data-v-61929a25-s="">import</span> <span class="token punctuation" data-v-61929a25-s="">{</span> ref <span class="token punctuation" data-v-61929a25-s="">}</span> <span class="token keyword" data-v-61929a25-s="">from</span> <span class="token string" data-v-61929a25-s="">'vue'</span>
<span class="token keyword" data-v-61929a25-s="">import</span> Child <span class="token keyword" data-v-61929a25-s="">from</span> <span class="token string" data-v-61929a25-s="">'@cp/Child.vue'</span>

<span class="token keyword" data-v-61929a25-s="">const</span> name <span class="token operator" data-v-61929a25-s="">=</span> ref<span class="token operator" data-v-61929a25-s="">&lt;</span>string<span class="token operator" data-v-61929a25-s="">&gt;</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token string" data-v-61929a25-s="">'Petter'</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>

<span class="token keyword" data-v-61929a25-s="">const</span> changeName <span class="token operator" data-v-61929a25-s="">=</span> <span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token operator" data-v-61929a25-s="">:</span> <span class="token parameter" data-v-61929a25-s=""><span class="token keyword" data-v-61929a25-s="">void</span></span> <span class="token operator" data-v-61929a25-s="">=&gt;</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
  name<span class="token punctuation" data-v-61929a25-s="">.</span>value <span class="token operator" data-v-61929a25-s="">=</span> <span class="token string" data-v-61929a25-s="">'Tom'</span><span class="token punctuation" data-v-61929a25-s="">;</span>
<span class="token punctuation" data-v-61929a25-s="">}</span>
</span></span><span class="token tag" data-v-61929a25-s=""><span class="token tag" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">&lt;/</span>script</span><span class="token punctuation" data-v-61929a25-s="">&gt;</span></span>
</code></pre><p data-v-61929a25-s="">有没有瞬间清爽百倍的感觉！！！</p><p data-v-61929a25-s="">在 script-setup 的写法里，所有数据都是默认 <code data-v-61929a25-s="">return</code> 的，子组件也无需通过 <code data-v-61929a25-s="">components</code> 选项进行挂载了，默认导入即生效，在编码过程中，可以大大的提高开发效率。</p><blockquote data-v-61929a25-s=""><p data-v-61929a25-s="">所以疑问就来了，父组件是爽了，那么子组件呢？整个 script 都变成了一个大的 setup function ，没有了组件选项，也没有了 setup 入参，如何获取父组件传下来的 props 和 emits 呢？</p></blockquote><p data-v-61929a25-s="">所以，这两个新的 API ，就是在 script-setup 里帮助子组件拿到父级传过来的 props 和 emits 。</p><blockquote data-v-61929a25-s=""><p data-v-61929a25-s="">注：以下所有的 JS / TS 部分，如果没有特别说明，都是指写在 <code data-v-61929a25-s="">&lt;script setup&gt;</code> 里</p></blockquote><h2 id="defineprops" data-v-61929a25-s=""><a class="header-anchor" href="#defineprops" aria-hidden="true" data-v-61929a25-s="">#</a> defineProps</h2><p data-v-61929a25-s="">defineProps 是一个方法，内部返回一个对象，也就是挂载到这个组件上的所有 props ，它和普通的 props 用法一样，如果不指定为 prop， 则传下来的属性会被放到 attrs 那边去。</p><h3 id="基础用法" data-v-61929a25-s=""><a class="header-anchor" href="#基础用法" aria-hidden="true" data-v-61929a25-s="">#</a> 基础用法</h3><p data-v-61929a25-s="">所以，如果只是单纯在 template 里使用，那么其实就这么简单定义就可以了：</p><pre class="language-js" data-v-61929a25-s=""><code class="language-js" data-v-61929a25-s=""><span class="token keyword" data-v-61929a25-s="">import</span> <span class="token punctuation" data-v-61929a25-s="">{</span> defineProps <span class="token punctuation" data-v-61929a25-s="">}</span> <span class="token keyword" data-v-61929a25-s="">from</span> <span class="token string" data-v-61929a25-s="">'vue'</span>

<span class="token function" data-v-61929a25-s="">defineProps</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">[</span>
  <span class="token string" data-v-61929a25-s="">'name'</span><span class="token punctuation" data-v-61929a25-s="">,</span>
  <span class="token string" data-v-61929a25-s="">'userInfo'</span><span class="token punctuation" data-v-61929a25-s="">,</span>
  <span class="token string" data-v-61929a25-s="">'tags'</span>
<span class="token punctuation" data-v-61929a25-s="">]</span><span class="token punctuation" data-v-61929a25-s="">)</span>
</code></pre><p data-v-61929a25-s="">使用 <code data-v-61929a25-s="">string[]</code> 数组作为入参，把 prop 的名称作为数组的 item 传给 defineProps 就可以了。</p><blockquote data-v-61929a25-s=""><p data-v-61929a25-s="">记得从 vue 导入 defineProps 噢，下面的代码就不重复 import 啦！！！</p></blockquote><p data-v-61929a25-s="">如果 script 里的方法要拿到 props 的值，你也可以使用字面量定义：</p><pre class="language-ts" data-v-61929a25-s=""><code class="language-ts" data-v-61929a25-s=""><span class="token keyword" data-v-61929a25-s="">const</span> props <span class="token operator" data-v-61929a25-s="">=</span> <span class="token function" data-v-61929a25-s="">defineProps</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">[</span>
  <span class="token string" data-v-61929a25-s="">'name'</span><span class="token punctuation" data-v-61929a25-s="">,</span>
  <span class="token string" data-v-61929a25-s="">'userInfo'</span><span class="token punctuation" data-v-61929a25-s="">,</span>
  <span class="token string" data-v-61929a25-s="">'tags'</span>
<span class="token punctuation" data-v-61929a25-s="">]</span><span class="token punctuation" data-v-61929a25-s="">)</span>

<span class="token builtin" data-v-61929a25-s="">console</span><span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">log</span><span class="token punctuation" data-v-61929a25-s="">(</span>props<span class="token punctuation" data-v-61929a25-s="">.</span>name<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
</code></pre><p data-v-61929a25-s="">但在作为一个 Vue 老玩家，都清楚不显性的指定 prop 类型的话，很容易在协作中引起程序报错，那么应该如何对每个 prop 进行类型检查呢？</p><p data-v-61929a25-s="">有两种方式来处理类型定义。</p><h3 id="通过构造函数进行检查" data-v-61929a25-s=""><a class="header-anchor" href="#通过构造函数进行检查" aria-hidden="true" data-v-61929a25-s="">#</a> 通过构造函数进行检查</h3><p data-v-61929a25-s="">这是第一种方式：使用 JavaScript 原生构造函数进行类型规定。</p><p data-v-61929a25-s="">也就是跟我们平时定义 prop 类型时一样， Vue 会通过 instanceof 来进行 <a href="https://v3.cn.vuejs.org/guide/component-props.html#%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">类型检查</a> 。</p><p data-v-61929a25-s="">使用这种方法，需要通过一个 “对象” 入参来传递给 defineProps，比如：</p><pre class="language-ts" data-v-61929a25-s=""><code class="language-ts" data-v-61929a25-s=""><span class="token function" data-v-61929a25-s="">defineProps</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">{</span>
  name<span class="token operator" data-v-61929a25-s="">:</span> String<span class="token punctuation" data-v-61929a25-s="">,</span>
  userInfo<span class="token operator" data-v-61929a25-s="">:</span> Object<span class="token punctuation" data-v-61929a25-s="">,</span>
  tags<span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">Array</span>
<span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
</code></pre><p data-v-61929a25-s="">所有原来 props 具备的校验机制，都可以适用，比如你除了要限制类型外，还想指定 name 是可选，并且带有一个默认值：</p><pre class="language-ts" data-v-61929a25-s=""><code class="language-ts" data-v-61929a25-s=""><span class="token function" data-v-61929a25-s="">defineProps</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">{</span>
  name<span class="token operator" data-v-61929a25-s="">:</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
    <span class="token keyword" data-v-61929a25-s="">type</span><span class="token operator" data-v-61929a25-s="">:</span> String<span class="token punctuation" data-v-61929a25-s="">,</span>
    required<span class="token operator" data-v-61929a25-s="">:</span> <span class="token boolean" data-v-61929a25-s="">false</span><span class="token punctuation" data-v-61929a25-s="">,</span>
    <span class="token keyword" data-v-61929a25-s="">default</span><span class="token operator" data-v-61929a25-s="">:</span> <span class="token string" data-v-61929a25-s="">'Petter'</span>
  <span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">,</span>
  userInfo<span class="token operator" data-v-61929a25-s="">:</span> Object<span class="token punctuation" data-v-61929a25-s="">,</span>
  tags<span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">Array</span>
<span class="token punctuation" data-v-61929a25-s="">}</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
</code></pre><p data-v-61929a25-s="">更多的 props 校验机制，可以点击 <a href="https://vue3.chengpeiquan.com/communication.html#%E5%B8%A6%E6%9C%89%E7%B1%BB%E5%9E%8B%E9%99%90%E5%88%B6%E7%9A%84-props" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">带有类型限制的 props</a> 和 <a href="https://vue3.chengpeiquan.com/communication.html#%E5%8F%AF%E9%80%89%E4%BB%A5%E5%8F%8A%E5%B8%A6%E6%9C%89%E9%BB%98%E8%AE%A4%E5%80%BC%E7%9A%84-props" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">可选以及带有默认值的 props</a> 了解更多。</p><h3 id="使用类型注解进行检查" data-v-61929a25-s=""><a class="header-anchor" href="#使用类型注解进行检查" aria-hidden="true" data-v-61929a25-s="">#</a> 使用类型注解进行检查</h3><p data-v-61929a25-s="">这是第二种方式：使用 TypeScript 的类型注解。</p><p data-v-61929a25-s="">和 ref 等 API 的用法一样，defineProps 也是可以使用尖括号 &lt;&gt; 来包裹类型定义，紧跟在 API 后面，另外，由于 defineProps 返回的是一个对象（因为 props 本身是一个对象），所以尖括号里面的类型还要用大括号包裹，通过 <code data-v-61929a25-s="">key: value</code> 的键值对形式表示，如：</p><pre class="language-ts" data-v-61929a25-s=""><code class="language-ts" data-v-61929a25-s=""><span class="token generic-function" data-v-61929a25-s=""><span class="token function" data-v-61929a25-s="">defineProps</span><span class="token generic class-name" data-v-61929a25-s=""><span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token punctuation" data-v-61929a25-s="">{</span> name<span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">string</span> <span class="token punctuation" data-v-61929a25-s="">}</span><span class="token operator" data-v-61929a25-s="">&gt;</span></span></span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
</code></pre><p data-v-61929a25-s="">注意到了吗？这里使用的类型，和第一种方法提到的指定类型时是不一样的，在这里，不再使用构造函数校验，而是需要遵循使用 TypeScript 的类型，比如字符串是 string，而不是 String。</p><p data-v-61929a25-s="">如果有多个 prop ，就跟写 interface 一样：</p><pre class="language-ts" data-v-61929a25-s=""><code class="language-ts" data-v-61929a25-s=""><span class="token generic-function" data-v-61929a25-s=""><span class="token function" data-v-61929a25-s="">defineProps</span><span class="token generic class-name" data-v-61929a25-s=""><span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token punctuation" data-v-61929a25-s="">{</span>
  name<span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">string</span><span class="token punctuation" data-v-61929a25-s="">;</span>
  phoneNumber<span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">number</span><span class="token punctuation" data-v-61929a25-s="">;</span>
  userInfo<span class="token operator" data-v-61929a25-s="">:</span> object<span class="token punctuation" data-v-61929a25-s="">;</span>
  tags<span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">string</span><span class="token punctuation" data-v-61929a25-s="">[</span><span class="token punctuation" data-v-61929a25-s="">]</span><span class="token punctuation" data-v-61929a25-s="">;</span>
<span class="token punctuation" data-v-61929a25-s="">}</span><span class="token operator" data-v-61929a25-s="">&gt;</span></span></span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
</code></pre><p data-v-61929a25-s="">其中，举例里的 userInfo 是一个对象，你可以简单的指定为 object，也可以先定义好它对应的类型，再进行指定：</p><pre class="language-ts" data-v-61929a25-s=""><code class="language-ts" data-v-61929a25-s=""><span class="token keyword" data-v-61929a25-s="">interface</span> <span class="token class-name" data-v-61929a25-s="">UserInfo</span> <span class="token punctuation" data-v-61929a25-s="">{</span>
  id<span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">number</span><span class="token punctuation" data-v-61929a25-s="">;</span>
  age<span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">number</span><span class="token punctuation" data-v-61929a25-s="">;</span>
<span class="token punctuation" data-v-61929a25-s="">}</span>

<span class="token generic-function" data-v-61929a25-s=""><span class="token function" data-v-61929a25-s="">defineProps</span><span class="token generic class-name" data-v-61929a25-s=""><span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token punctuation" data-v-61929a25-s="">{</span>
  name<span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">string</span><span class="token punctuation" data-v-61929a25-s="">;</span>
  userInfo<span class="token operator" data-v-61929a25-s="">:</span> UserInfo<span class="token punctuation" data-v-61929a25-s="">;</span>
<span class="token punctuation" data-v-61929a25-s="">}</span><span class="token operator" data-v-61929a25-s="">&gt;</span></span></span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
</code></pre><p data-v-61929a25-s="">如果你想对某个数据设置为可选，也是遵循 TS 规范，通过英文问号 <code data-v-61929a25-s="">?</code> 来允许可选：</p><pre class="language-ts" data-v-61929a25-s=""><code class="language-ts" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">// name 是可选</span>
<span class="token generic-function" data-v-61929a25-s=""><span class="token function" data-v-61929a25-s="">defineProps</span><span class="token generic class-name" data-v-61929a25-s=""><span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token punctuation" data-v-61929a25-s="">{</span>
  name<span class="token operator" data-v-61929a25-s="">?</span><span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">string</span><span class="token punctuation" data-v-61929a25-s="">;</span>
  tags<span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">string</span><span class="token punctuation" data-v-61929a25-s="">[</span><span class="token punctuation" data-v-61929a25-s="">]</span><span class="token punctuation" data-v-61929a25-s="">;</span>
<span class="token punctuation" data-v-61929a25-s="">}</span><span class="token operator" data-v-61929a25-s="">&gt;</span></span></span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
</code></pre><p data-v-61929a25-s="">如果你想设置可选参数的默认值，这个暂时不支持，不能跟 TS 一样指定默认值，在 RFC 的文档里也有说明目前无法指定。</p><blockquote data-v-61929a25-s=""><p data-v-61929a25-s="">Unresolved questions: Providing props default values when using type-only props declaration.</p></blockquote><p data-v-61929a25-s="">不过如果你确实需要默认指定，并且无需保留响应式的话，我自己测试是可以按照 ES6 的参数默认值方法指定：</p><pre class="language-ts" data-v-61929a25-s=""><code class="language-ts" data-v-61929a25-s=""><span class="token keyword" data-v-61929a25-s="">const</span> <span class="token punctuation" data-v-61929a25-s="">{</span> name <span class="token operator" data-v-61929a25-s="">=</span> <span class="token string" data-v-61929a25-s="">'Petter'</span> <span class="token punctuation" data-v-61929a25-s="">}</span> <span class="token operator" data-v-61929a25-s="">=</span> <span class="token generic-function" data-v-61929a25-s=""><span class="token function" data-v-61929a25-s="">defineProps</span><span class="token generic class-name" data-v-61929a25-s=""><span class="token operator" data-v-61929a25-s="">&lt;</span><span class="token punctuation" data-v-61929a25-s="">{</span>
  name<span class="token operator" data-v-61929a25-s="">?</span><span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">string</span><span class="token punctuation" data-v-61929a25-s="">;</span>
  tags<span class="token operator" data-v-61929a25-s="">:</span> <span class="token builtin" data-v-61929a25-s="">string</span><span class="token punctuation" data-v-61929a25-s="">[</span><span class="token punctuation" data-v-61929a25-s="">]</span><span class="token punctuation" data-v-61929a25-s="">;</span>
<span class="token punctuation" data-v-61929a25-s="">}</span><span class="token operator" data-v-61929a25-s="">&gt;</span></span></span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
</code></pre><p data-v-61929a25-s="">这样如果传入了 name 则按传入的数据，否则就按默认值，但是，有个但是，就是这样 name 就会失去响应性（因为响应式数据被解构后会变回普通数据），请注意这一点！</p><blockquote data-v-61929a25-s=""><p data-v-61929a25-s="">需要强调的一点是：这两种校验方式只能二选一，否则会引起程序报错</p></blockquote><h2 id="defineemit" data-v-61929a25-s=""><a class="header-anchor" href="#defineemit" aria-hidden="true" data-v-61929a25-s="">#</a> defineEmit</h2><p data-v-61929a25-s="">defineEmit 也是一个方法，它接受的入参格式和标准组件的要求是一致的。</p><blockquote data-v-61929a25-s=""><p data-v-61929a25-s="">注意：defineProps 是复数结尾，带有 s，defineEmit 没有！</p></blockquote><p data-v-61929a25-s="">由于 emit 并非提供给模板直接读取，所以需要通过字面量来定义 emits，最基础的用法也是传递一个 string[] 数组进来，把每个 emit 的名称作为数组的 item 。</p><pre class="language-ts" data-v-61929a25-s=""><code class="language-ts" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">// 获取 emit</span>
<span class="token keyword" data-v-61929a25-s="">const</span> emit <span class="token operator" data-v-61929a25-s="">=</span> <span class="token function" data-v-61929a25-s="">defineEmit</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">[</span><span class="token string" data-v-61929a25-s="">'chang-name'</span><span class="token punctuation" data-v-61929a25-s="">]</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>

<span class="token comment" data-v-61929a25-s="">// 调用 emit</span>
<span class="token function" data-v-61929a25-s="">emit</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token string" data-v-61929a25-s="">'chang-name'</span><span class="token punctuation" data-v-61929a25-s="">,</span> <span class="token string" data-v-61929a25-s="">'Tom'</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
</code></pre><p data-v-61929a25-s="">由于 defineEmit 的用法和原来的 emits 选项差别不大，这里也不重复说明更多的诸如校验之类的用法了，可以查看 <a href="https://vue3.chengpeiquan.com/communication.html#%E6%8E%A5%E6%94%B6-emits" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">接收 emits</a> 一节了解更多。</p><h2 id="usecontext" data-v-61929a25-s=""><a class="header-anchor" href="#usecontext" aria-hidden="true" data-v-61929a25-s="">#</a> useContext</h2><p data-v-61929a25-s="">在标准组件写法里，setup 函数默认支持两个入参：</p><table data-v-61929a25-s=""><thead data-v-61929a25-s=""><tr data-v-61929a25-s=""><th style="text-align:left;" data-v-61929a25-s="">参数</th><th style="text-align:left;" data-v-61929a25-s="">类型</th><th style="text-align:left;" data-v-61929a25-s="">含义</th></tr></thead><tbody data-v-61929a25-s=""><tr data-v-61929a25-s=""><td style="text-align:left;" data-v-61929a25-s="">props</td><td style="text-align:left;" data-v-61929a25-s="">object</td><td style="text-align:left;" data-v-61929a25-s="">由父组件传递下来的数据</td></tr><tr data-v-61929a25-s=""><td style="text-align:left;" data-v-61929a25-s="">context</td><td style="text-align:left;" data-v-61929a25-s="">object</td><td style="text-align:left;" data-v-61929a25-s="">组件的执行上下文</td></tr></tbody></table><p data-v-61929a25-s="">这里的第二个参数 context，在 script-setup 写法里，就需要通过 useContext 来获取，一样的，记得先导入依赖：</p><pre class="language-ts" data-v-61929a25-s=""><code class="language-ts" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">// 导入 useContext 组件</span>
<span class="token keyword" data-v-61929a25-s="">import</span> <span class="token punctuation" data-v-61929a25-s="">{</span> useContext <span class="token punctuation" data-v-61929a25-s="">}</span> <span class="token keyword" data-v-61929a25-s="">from</span> <span class="token string" data-v-61929a25-s="">'vue'</span>

<span class="token comment" data-v-61929a25-s="">// 获取 context</span>
<span class="token keyword" data-v-61929a25-s="">const</span> ctx <span class="token operator" data-v-61929a25-s="">=</span> <span class="token function" data-v-61929a25-s="">useContext</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>

<span class="token comment" data-v-61929a25-s="">// 打印 attrs</span>
<span class="token builtin" data-v-61929a25-s="">console</span><span class="token punctuation" data-v-61929a25-s="">.</span><span class="token function" data-v-61929a25-s="">log</span><span class="token punctuation" data-v-61929a25-s="">(</span>ctx<span class="token punctuation" data-v-61929a25-s="">.</span>attrs<span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
</code></pre><p data-v-61929a25-s="">你也可以对它进行解构，直接获取到内部的数据：</p><pre class="language-ts" data-v-61929a25-s=""><code class="language-ts" data-v-61929a25-s=""><span class="token comment" data-v-61929a25-s="">// 直接获取 attrs</span>
<span class="token keyword" data-v-61929a25-s="">const</span> <span class="token punctuation" data-v-61929a25-s="">{</span> attrs <span class="token punctuation" data-v-61929a25-s="">}</span> <span class="token operator" data-v-61929a25-s="">=</span> <span class="token function" data-v-61929a25-s="">useContext</span><span class="token punctuation" data-v-61929a25-s="">(</span><span class="token punctuation" data-v-61929a25-s="">)</span><span class="token punctuation" data-v-61929a25-s="">;</span>
</code></pre><p data-v-61929a25-s="">对于 context 的使用和注意事项，如果不了解的话，可以在 <a href="https://vue3.chengpeiquan.com/component.html#setup-%E7%9A%84%E5%8F%82%E6%95%B0%E4%BD%BF%E7%94%A8" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">setup 的参数使用</a> 了解更多。</p><h2 id="参考资料" data-v-61929a25-s=""><a class="header-anchor" href="#参考资料" aria-hidden="true" data-v-61929a25-s="">#</a> 参考资料</h2><p data-v-61929a25-s="">以上所有的资料都来自于 Vue 的 rfcs 仓库，原文传送门：<a href="https://github.com/vuejs/rfcs/blob/script-setup-2/active-rfcs/0000-script-setup.md" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">script-setup - vuejs/rfcs</a> 。</p><p data-v-61929a25-s="">除了看英文说明适当做了翻译之外，大部分坑点都是自己在 DEMO 里运行出来总结的，后面如果有什么变动的话，建议以官网文档的正式版为准，我也会留意他们正式发布后的变化进行内容更新。</p><h2 id="结语" data-v-61929a25-s=""><a class="header-anchor" href="#结语" aria-hidden="true" data-v-61929a25-s="">#</a> 结语</h2><p data-v-61929a25-s="">目前在运行项目的时候，控制台会有提醒：</p><pre class="language-bash" data-v-61929a25-s=""><code class="language-bash" data-v-61929a25-s=""><span class="token punctuation" data-v-61929a25-s="">[</span>@vue/compiler-sfc<span class="token punctuation" data-v-61929a25-s="">]</span> <span class="token operator" data-v-61929a25-s="">&lt;</span>script setup<span class="token operator" data-v-61929a25-s="">&gt;</span> is still an experimental proposal.
Follow its status at https://github.com/vuejs/rfcs/pull/227.

<span class="token punctuation" data-v-61929a25-s="">[</span>@vue/compiler-sfc<span class="token punctuation" data-v-61929a25-s="">]</span> When using experimental features,
it is recommended to pin your vue dependencies to exact versions to avoid breakage.
</code></pre><p data-v-61929a25-s="">告知 script setup 当前仍然是个实验性的新特性，还没有作为正式特性发布，后面会不会有变化还不好说，本文仅作为目前有用到这个新特性的同学参考。</p><p data-v-61929a25-s="">更多关于 Vue 3.0 的起步教程，可以在 <a href="https://vue3.chengpeiquan.com" class="custom-external-link" target="_blank" rel="noopener noreferrer" data-v-61929a25-s="">Vue3.0学习教程与实战案例</a> 了解，稍后有时间我也会把这部分内容一起合并进去。</p></div><!--]--><!--]--></section><section class="article-sidebar lg:flex hidden flex-col flex-shrink-0 ml-16" data-v-61929a25="" data-v-61ffcee1=""><!----><section class="mb-16" data-v-61ffcee1=""><h2 class="block-title" data-v-61ffcee1="">热门栏目</h2><div class="flex flex-col w-full" data-v-61ffcee1=""><a href="https://vue3.chengpeiquan.com/" target="_blank" data-v-61ffcee1=""><img class="w-full" src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2021/01/1-1.jpg" alt="Vue3.0学习教程与实战案例" data-v-61ffcee1=""></a></div></section><section class="mb-8" data-v-61ffcee1=""><div class="block-title flex justify-between items-center" data-v-61ffcee1=""><h2 data-v-61ffcee1="">猜你喜欢</h2><span class="text-base font-normal cursor-pointer select-none" data-v-61ffcee1=""> 换一换 </span></div><ul data-v-61ffcee1=""><!--[--><li class="flex mb-8" data-v-61ffcee1=""><div class="flex flex-shrink-0 w-16 h-12 overflow-hidden mr-4 rounded" data-v-61ffcee1=""><a href="/article/api-design.html" title="接口设计：从前端开发的角度谈一谈接口规范" class="" data-v-61ffcee1=""><img class="img" src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2020/02/1.jpg" alt="接口设计：从前端开发的角度谈一谈接口规范" data-v-61ffcee1=""></a></div><a href="/article/api-design.html" class="flex flex-1 line-clamp-2" title="接口设计：从前端开发的角度谈一谈接口规范" data-v-61ffcee1=""><h2 class="article-title text-base" data-v-61ffcee1="">接口设计：从前端开发的角度谈一谈接口规范</h2></a></li><li class="flex mb-8" data-v-61ffcee1=""><div class="flex flex-shrink-0 w-16 h-12 overflow-hidden mr-4 rounded" data-v-61ffcee1=""><a href="/article/canvas-movie-jitter-effect.html" title="电影故障抖动视觉效果实现：对大话手游愚人节专题的探究" class="" data-v-61ffcee1=""><img class="img" src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2020/04/1.jpg" alt="电影故障抖动视觉效果实现：对大话手游愚人节专题的探究" data-v-61ffcee1=""></a></div><a href="/article/canvas-movie-jitter-effect.html" class="flex flex-1 line-clamp-2" title="电影故障抖动视觉效果实现：对大话手游愚人节专题的探究" data-v-61ffcee1=""><h2 class="article-title text-base" data-v-61ffcee1="">电影故障抖动视觉效果实现：对大话手游愚人节专题的探究</h2></a></li><li class="flex mb-8" data-v-61ffcee1=""><div class="flex flex-shrink-0 w-16 h-12 overflow-hidden mr-4 rounded" data-v-61ffcee1=""><a aria-current="page" href="/article/vue3-script-setup.html" title="聊一聊Vue3.0的script-setup 以及全新的props/emits专属API" class="router-link-active router-link-exact-active" data-v-61ffcee1=""><img class="img" src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2021/02/20210305211036.jpg" alt="聊一聊Vue3.0的script-setup 以及全新的props/emits专属API" data-v-61ffcee1=""></a></div><a aria-current="page" href="/article/vue3-script-setup.html" class="router-link-active router-link-exact-active flex flex-1 line-clamp-2" title="聊一聊Vue3.0的script-setup 以及全新的props/emits专属API" data-v-61ffcee1=""><h2 class="article-title text-base" data-v-61ffcee1="">聊一聊Vue3.0的script-setup 以及全新的props/emits专属API</h2></a></li><li class="flex mb-8" data-v-61ffcee1=""><div class="flex flex-shrink-0 w-16 h-12 overflow-hidden mr-4 rounded" data-v-61ffcee1=""><a href="/article/rewrite-in-vite.html" title="重构于Vite" class="" data-v-61ffcee1=""><img class="img" src="https://cdn.jsdelivr.net/gh/chengpeiquan/assets-storage/img/2021/02/20210219234631.jpg" alt="重构于Vite" data-v-61ffcee1=""></a></div><a href="/article/rewrite-in-vite.html" class="flex flex-1 line-clamp-2" title="重构于Vite" data-v-61ffcee1=""><h2 class="article-title text-base" data-v-61ffcee1="">重构于Vite</h2></a></li><!--]--></ul></section></section><!--]--></main><!--[--><footer class="flex justify-center items-center w-full h-36 opacity-70 md:text-sm text-xs"><span>© 2023 服务端技术</span><br><a class="md:ml-12 ml-2" href="https://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener noreferrer">粤ICP备19128351号-2</a></footer><!----><!--]--><!--]--></div>
    
  

</body></html>